<ion-header>
  <ion-toolbar>
    <ion-title >
      Formulario Datos Personales
    </ion-title>
    <ion-button routerLink="/mensajeria" fill="clear" slot="start">
      <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
    </ion-button>
    <ion-button (click)="validateFormPersonal()" fill="clear" slot="end">
        <ion-icon slot="icon-only" name="arrow-forward"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="formPersonales"> <!--permite añadir las vaildaciones-->
    <ion-grid class="grid">
      <ion-row>
        <ion-col size="1">
        </ion-col>
        <ion-col size="4.5">
          <ion-list>
            <ion-item>
              <ion-label position="floating">* E.P.S:</ion-label>
              <ion-select formControlName="eps" okText="Seleccionar" cancelText="Cerrar">
                <ion-select-option *ngFor="let eps of epsList$ | async"
                [value]="eps.descripcion">{{eps.descripcion}}</ion-select-option>
              </ion-select>
              <div *ngIf="!formPersonales.controls.eps.valid && formSubmit">
               <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Nombre:</ion-label>
              <ion-input formControlName="nombre"></ion-input>
              <div *ngIf="!formPersonales.controls.nombre.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Apellido:</ion-label>
              <ion-input formControlName="apellido"></ion-input>
              <div *ngIf="!formPersonales.controls.eps.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Tipo de Documento:</ion-label>
              <ion-select formControlName="tipoDocumento" okText="Seleccionar" cancelText="Cerrar">
                <ion-select-option *ngFor="let tipoDocumento of tipoDocumentoList$ | async"
                [value]="tipoDocumento.descripcion">{{tipoDocumento.descripcion}}</ion-select-option>
              </ion-select>
              <div *ngIf="!formPersonales.controls.tipoDocumento.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Numero de Identidad:</ion-label>
              <ion-input formControlName="numeroIdentidad"></ion-input>
              <div *ngIf="!formPersonales.controls.numeroIdentidad.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label>* Fecha de Nacimiento:</ion-label>
              <ion-datetime formControlName="fechaNacimiento" display-format="DD MMM, YYYY"></ion-datetime>
              <div *ngIf="!formPersonales.controls.fechaNacimiento.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Lugar de Nacimiento:</ion-label>
              <ion-input formControlName="lugarNacimiento"></ion-input>
              <div *ngIf="!formPersonales.controls.lugarNacimiento.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Genero:</ion-label>
              <ion-select formControlName="genero" okText="Seleccionar" cancelText="Cerrar">
                <ion-select-option *ngFor="let genero of generoList$ | async"
                [value]="genero.descripcion">{{genero.descripcion}}</ion-select-option>
              </ion-select>
              <div *ngIf="!formPersonales.controls.genero.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Estado Civil:</ion-label>
              <ion-select formControlName="estadoCivil" okText="Seleccionar" cancelText="Cerrar">
                <ion-select-option *ngFor="let estadoCivil of estadoCivilList$ | async"
                                  [value]="estadoCivil.descripcion">{{estadoCivil.descripcion}}</ion-select-option>
              </ion-select>
              <div *ngIf="!formPersonales.controls.estadoCivil.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item> 
              <ion-label position="floating">* Nivel Educativo:</ion-label>
              <ion-select formControlName="nivelEducacion" okText="Seleccionar" cancelText="Cerrar">
              </ion-select>
              <div *ngIf="!formPersonales.controls.nivelEducacion.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
          </ion-list>
        </ion-col>
        <ion-col size="1">
        </ion-col>
        <ion-col size="4.5">
          <ion-list>
            <ion-item>
              <ion-label position="floating">* Historia Clinica:</ion-label>
              <ion-input formControlName="historiaClinica"></ion-input>
              <div *ngIf="!formPersonales.controls.historiaClinica.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label>* Fecha:</ion-label>
              <ion-datetime formControlName="fecha" display-format="DD MMM, YYYY"></ion-datetime>
              <div *ngIf="!formPersonales.controls.fecha.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item> 
              <ion-label position="floating">* Nivel Socioeconomico:</ion-label>
              <ion-select formControlName="nivelSocioEconomico" okText="Seleccionar" cancelText="Cerrar">
              </ion-select>
              <div *ngIf="!formPersonales.controls.nivelSocioEconomico.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Ocupación:</ion-label>
              <ion-input formControlName="ocupacion"></ion-input>
              <div *ngIf="!formPersonales.controls.ocupacion.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Telefono Celular:</ion-label>
              <ion-input formControlName="telefonoCelular"></ion-input>
              <div *ngIf="!formPersonales.controls.telefonoCelular.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Telefono Fijo:</ion-label>
              <ion-input formControlName="telefonoFijo"></ion-input>
              <div *ngIf="!formPersonales.controls.telefonoFijo.valid && formSubmit">
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating"> Correo:</ion-label>
              <ion-input formControlName="correo"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">* Dierección:</ion-label>
              <ion-input formControlName="direccion"></ion-input> <!--controla que el campo este valido-->
              <div *ngIf="!formPersonales.controls.direccion.valid && formSubmit"> <!--imprime un mensaje (rojo) que el campo es obligatorio cuando intentas dejarlo-->
                <small style = "color:red"> Campo Obligatorio</small>
              </div>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Responsable:</ion-label>
              <ion-input formControlName="responsable"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Telefono Responsable:</ion-label>
              <ion-input formControlName="telefonoResponsable"></ion-input>
            </ion-item>
          </ion-list>
        </ion-col>
        <ion-col size="1">
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
